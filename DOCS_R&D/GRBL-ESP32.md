https://github.com/bdring/Grbl_Esp32
–ß—É–¥–æ–≤–æ, –í–ª–∞–¥–∏—Å–ª–∞–≤–µ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –Ω–∞ ESP32 ‚Äî —Ü–µ —Å–µ—Ä–π–æ–∑–Ω–∏–π –∫—Ä–æ–∫ —É–ø–µ—Ä–µ–¥. –û—Å—å –ø–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è —Ç–≤–æ–≥–æ 2-–æ—Å—å–æ–≤–æ–≥–æ –ª–∞–∑–µ—Ä–Ω–æ–≥–æ CNC –∑ –∫—ñ–Ω—Ü–µ–≤–∏–∫–∞–º–∏ —Ç–∞ PWM –Ω–∞ GPIO25, —è–∫–∞ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—ñ–π–¥–µ –¥–ª—è GRBL-ESP32.

‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Machine.h –¥–ª—è GRBL-ESP32
cpp
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
#pragma once
#include "Machines/Default.h"

// –¢–∏–ø —à–ø–∏–Ω–¥–µ–ª—è ‚Äî –ª–∞–∑–µ—Ä
#define SPINDLE_TYPE SpindleType::LASER

// PWM-–≤–∏—Ö—ñ–¥ –¥–ª—è –ª–∞–∑–µ—Ä–∞
#define LASER_PWM_PIN GPIO_NUM_25
#define LASER_ENABLE_PIN GPIO_NUM_26  // –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –æ–∫—Ä–µ–º–∏–π –ø—ñ–Ω –¥–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –ª–∞–∑–µ—Ä–∞

// –ü—ñ–Ω–∏ –¥–ª—è –æ—Å—ñ X
#define X_STEP_PIN GPIO_NUM_33
#define X_DIRECTION_PIN GPIO_NUM_32
#define X_LIMIT_PIN GPIO_NUM_34

// –ü—ñ–Ω–∏ –¥–ª—è –æ—Å—ñ Y
#define Y_STEP_PIN GPIO_NUM_27
#define Y_DIRECTION_PIN GPIO_NUM_14
#define Y_LIMIT_PIN GPIO_NUM_35

// –í–∫–ª—é—á–µ–Ω–Ω—è –∫—ñ–Ω—Ü–µ–≤–∏–∫—ñ–≤
#define USE_X_LIMIT
#define USE_Y_LIMIT

// –í–∫–ª—é—á–µ–Ω–Ω—è –ª–∞–∑–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
#define USE_LASER

// –ß–∞—Å—Ç–æ—Ç–∞ PWM
#define DEFAULT_SPINDLE_PWM_FREQ 5000  // 5 –∫–ì—Ü

// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Ç–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ª–∞–∑–µ—Ä–∞
#define SPINDLE_PWM_OFF_VALUE 0
#define SPINDLE_PWM_MIN_VALUE 0
#define SPINDLE_PWM_MAX_VALUE 1000
üîå –°—Ö–µ–º–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
–õ–∞–∑–µ—Ä:

PWM (–∂–æ–≤—Ç–∏–π) ‚Üí GPIO25

GND (—á–æ—Ä–Ω–∏–π) ‚Üí GND ESP32

V+ (—á–µ—Ä–≤–æ–Ω–∏–π) ‚Üí –æ–∫—Ä–µ–º–µ –¥–∂–µ—Ä–µ–ª–æ –∂–∏–≤–ª–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 12V –∞–±–æ 24V)

–ö—ñ–Ω—Ü–µ–≤–∏–∫–∏:

X-–∫—ñ–Ω—Ü–µ–≤–∏–∫ ‚Üí GPIO34

Y-–∫—ñ–Ω—Ü–µ–≤–∏–∫ ‚Üí GPIO35

–û–±–∏–¥–≤–∞ –∫—ñ–Ω—Ü–µ–≤–∏–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∏ –ø—ñ–¥—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–æ 3.3V

üõ†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GRBL
–ü—ñ—Å–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ ESP32 –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ GRBL-ESP32 —ñ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
$32=1       ; –í–∫–ª—é—á–∏—Ç–∏ –ª–∞–∑–µ—Ä–Ω–∏–π —Ä–µ–∂–∏–º
$30=1000    ; –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ª–∞–∑–µ—Ä–∞
$31=0       ; –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ª–∞–∑–µ—Ä–∞
$100=80     ; –ö—Ä–æ–∫–∏ –Ω–∞ –º–º –¥–ª—è –æ—Å—ñ X
$101=80     ; –ö—Ä–æ–∫–∏ –Ω–∞ –º–º –¥–ª—è –æ—Å—ñ Y
$110=5000   ; –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –¥–ª—è –æ—Å—ñ X
$111=5000   ; –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –¥–ª—è –æ—Å—ñ Y
$120=400    ; –ü—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è –¥–ª—è –æ—Å—ñ X
$121=400    ; –ü—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è –¥–ª—è –æ—Å—ñ Y
üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫—ñ–Ω—Ü–µ–≤–∏–∫—ñ–≤:

–í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É ? –≤ GRBL-–∫–æ–Ω—Å–æ–ª—å.

–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫—ñ–Ω—Ü–µ–≤–∏–∫ –æ—Å—ñ X –∞–±–æ Y —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Å—Ç–∞—Ç—É—Å –∑–º—ñ–Ω—é—î—Ç—å—Å—è.

–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–∞–∑–µ—Ä–∞:

–í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É M3 S500 ‚Äî –ª–∞–∑–µ—Ä –ø–æ–≤–∏–Ω–µ–Ω —Å–≤—ñ—Ç–∏—Ç–∏—Å—è –Ω–∞ 50% –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ.

–í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É M5 ‚Äî –ª–∞–∑–µ—Ä –ø–æ–≤–∏–Ω–µ–Ω –≤–∏–º–∫–Ω—É—Ç–∏—Å—è.

üì¶ –†–µ—Å—É—Ä—Å–∏
GRBL-ESP32 –Ω–∞ GitHub

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è GRBL-ESP32

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–æ—é –ø—Ä–æ—à–∏–≤–∫–∏ –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º CNCjs –Ω–∞ Raspberry Pi –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ ESP32. –î–∞–π –∑–Ω–∞—Ç–∏, —è–∫ –∑—Ä—É—á–Ω—ñ—à–µ!